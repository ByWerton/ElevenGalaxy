h<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ElevenGalaxy TM</title>
<style>
  /* Basit CSS, karanlık mod için */
  body {
    font-family: Arial, sans-serif;
    margin: 0; padding: 0;
    background: #fff; color: #222;
    transition: background-color 0.3s, color 0.3s;
  }
  body.dark {
    background: #121212;
    color: #eee;
  }
  header {
    background: #6200ee;
    color: white;
    padding: 1rem;
    position: sticky; top: 0; z-index: 1000;
    display: flex; justify-content: space-between; align-items: center;
  }
  header h1 {
    margin: 0; font-size: 1.5rem;
    user-select: none;
  }
  main {
    padding: 1rem;
    max-width: 700px;
    margin: 0 auto;
  }
  input, button {
    font-size: 1rem;
    padding: 0.5rem;
    margin: 0.25rem 0;
  }
  input[type="text"], input[type="email"], input[type="password"] {
    width: 100%;
    box-sizing: border-box;
  }
  button {
    cursor: pointer;
    background: #6200ee;
    border: none;
    color: white;
    border-radius: 4px;
  }
  button:disabled {
    background: #999;
    cursor: default;
  }
  .hidden {
    display: none;
  }
  nav {
    position: fixed;
    top: 0; left: 0;
    height: 100vh;
    width: 250px;
    background: #3700b3;
    color: white;
    padding: 1rem;
    transform: translateX(-260px);
    transition: transform 0.3s ease;
  }
  nav.show {
    transform: translateX(0);
  }
  nav h3 {
    margin-top: 0;
  }
  nav ul {
    list-style: none;
    padding-left: 0;
  }
  nav li {
    margin: 1rem 0;
  }
  .burger {
    font-size: 2rem;
    cursor: pointer;
    user-select: none;
  }
  .message-list {
    max-height: 300px;
    overflow-y: auto;
    border: 1px solid #ccc;
    padding: 0.5rem;
    margin: 1rem 0;
    background: #f9f9f9;
    border-radius: 6px;
  }
  body.dark .message-list {
    background: #222;
    border-color: #444;
  }
  .message {
    border-bottom: 1px solid #ddd;
    padding: 0.25rem 0;
  }
  body.dark .message {
    border-color: #555;
  }
  .leaderboard {
    margin-top: 1rem;
    border-top: 2px solid #6200ee;
    padding-top: 1rem;
  }
  .leaderboard h3 {
    margin-top: 0;
  }
  .user-list {
    max-height: 200px;
    overflow-y: auto;
    border: 1px solid #ccc;
    padding: 0.5rem;
    margin-top: 1rem;
    border-radius: 6px;
    background: #fafafa;
  }
  body.dark .user-list {
    background: #222;
    border-color: #444;
  }
  .user-item {
    display: flex;
    align-items: center;
    margin: 0.25rem 0;
  }
  .user-item img {
    width: 30px; height: 30px;
    border-radius: 50%;
    margin-right: 0.5rem;
  }
  .role {
    font-size: 0.75rem;
    margin-left: auto;
    padding: 0.1rem 0.4rem;
    border-radius: 4px;
    background: #bbb;
    color: #222;
  }
  .role.admin { background: #d32f2f; color: white; }
  .role.worker { background: #1976d2; color: white; }
  .role.viewer { background: #666; color: white; }
</style>
</head>
<body>
<header>
  <h1>ElevenGalaxy™</h1>
  <div id="burger" class="burger hidden">&#9776;</div>
</header>

<nav id="sideNav">
  <h3>Menü</h3>
  <ul>
    <li><button id="logoutBtn">Çıkış Yap</button></li>
    <li><button id="showUsersBtn">Kayıtlı Kullanıcılar</button></li>
    <li><button id="showLeaderboardBtn">En Çok Mesaj Atanlar</button></li>
    <li><button id="settingsBtn">Ayarlar</button></li>
  </ul>
</nav>

<main>
  <section id="authSection">
    <div id="loginForm">
      <h2>Giriş Yap</h2>
      <input type="email" id="loginEmail" placeholder="E-posta" required />
      <input type="password" id="loginPassword" placeholder="Şifre" required />
      <button id="loginBtn">Giriş Yap</button>
      <p>Hesabınız yok mu? <button id="showRegisterBtn">Kayıt Ol</button></p>
      <p><button id="forgotPassBtn">Şifremi Unuttum</button></p>
    </div>
    <div id="registerForm" class="hidden">
      <h2>Kayıt Ol</h2>
      <input type="text" id="registerUsername" placeholder="Kullanıcı Adı" required />
      <input type="email" id="registerEmail" placeholder="E-posta" required />
      <input type="password" id="registerPassword" placeholder="Şifre" required />
      <input type="password" id="registerPasswordConfirm" placeholder="Şifre Tekrar" required />
      <button id="registerBtn">Kayıt Ol</button>
      <p><button id="showLoginBtn">Zaten Hesabım Var</button></p>
    </div>
    <div id="forgotPassForm" class="hidden">
      <h2>Şifre Sıfırlama</h2>
      <input type="email" id="forgotPassEmail" placeholder="E-posta" required />
      <button id="forgotPassSendBtn">Şifre Sıfırlama E-postası Gönder</button>
      <p><button id="showLoginFromForgotBtn">Giriş Ekranına Dön</button></p>
    </div>
  </section>

  <section id="chatSection" class="hidden">
    <div style="display:flex; align-items:center; justify-content: space-between;">
      <h2>Mesajlar</h2>
      <button id="darkModeToggle">Karanlık Mod</button>
    </div>
    <div class="message-list" id="messages"></div>
    <input type="text" id="messageInput" placeholder="Mesajınızı yazın..." />
    <button id="sendMessageBtn" disabled>Gönder</button>
  </section>

  <section id="usersSection" class="hidden">
    <h2>Kayıtlı Kullanıcılar</h2>
    <div class="user-list" id="userList"></div>
  </section>

  <section id="leaderboardSection" class="hidden">
    <h2>En Çok Mesaj Atanlar</h2>
    <div class="user-list" id="leaderboardList"></div>
  </section>

  <section id="settingsSection" class="hidden">
    <h2>Ayarlar</h2>
    <label>
      Profil Fotoğrafı Yükle: <input type="file" id="profilePicInput" accept="image/*" />
    </label>
    <br />
    <button id="saveProfilePicBtn" disabled>Kaydet</button>
    <br /><br />
    <label>
      <input type="checkbox" id="darkModeCheckbox" /> Karanlık Mod
    </label>
    <br /><br />
    <label>
      Bildirimler
      <select id="notificationsSelect">
        <option value="all">Tüm Bildirimler</option>
        <option value="mentions">Sadece Bahsetmeler</option>
        <option value="none">Bildirimleri Kapat</option>
      </select>
    </label>
    <br /><br />
    <label>
      Açıklama:
      <textarea id="profileDescription" rows="3" placeholder="Kendinizden bahsedin..."></textarea>
    </label>
    <br />
    <button id="saveSettingsBtn">Ayarları Kaydet</button>
  </section>
</main>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-app.js";
  import {
    getAuth,
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword,
    sendPasswordResetEmail,
    onAuthStateChanged,
    signOut,
    updateProfile,
  } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-auth.js";
  import {
    getFirestore,
    doc,
    setDoc,
    getDoc,
    collection,
    query,
    where,
    onSnapshot,
    addDoc,
    orderBy,
    limit,
    updateDoc,
    serverTimestamp,
    getDocs,
  } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-firestore.js";
  import {
    getStorage,
    ref,
    uploadBytes,
    getDownloadURL,
  } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-storage.js";

  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyC05FCX8S8uU0a1airGrjPPKiMpO4bwT7U",
    authDomain: "elevengalaxy-web.firebaseapp.com",
    projectId: "elevengalaxy-web",
    storageBucket: "elevengalaxy-web.firebasestorage.app",
    messagingSenderId: "1044606246550",
    appId: "1:1044606246550:web:ba8d2759baa146f59f2cb7",
    measurementId: "G-V4M47VJ409",
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const storage = getStorage(app);

  // UI Elements
  const loginForm = document.getElementById("loginForm");
  const registerForm = document.getElementById("registerForm");
  const forgotPassForm = document.getElementById("forgotPassForm");
  const authSection = document.getElementById("authSection");
  const chatSection = document.getElementById("chatSection");
  const usersSection = document.getElementById("usersSection");
  const leaderboardSection = document.getElementById
